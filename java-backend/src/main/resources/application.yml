server:
  port: 8080

spring:
  application:
    name: redink-java-backend
  profiles:
    active: dev
    
  # 日志配置
  logging:
    level:
      com.redink: DEBUG
      org.springframework.ai: DEBUG
    pattern:
      console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
      file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
    file:
      name: logs/redink.log
      max-size: 10MB
      max-history: 30
  # 文件上传配置
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB
      enabled: true
      
  # HTTP客户端配置
  webflux:
    http-client:
      connect-timeout: 30s
      response-timeout: 300s
  ai:
    openai:
      # API密钥配置
      api-key: ${OPENAI_API_KEY:c59185a8-2c7b-4a8b-baa3-f52971670635}
      # 方舟大模型API地址
      base-url: https://ark.cn-beijing.volces.com/api/
      chat:
        options:
          # 模型ID,需要替换为实际的接入点ID
          model: ${OPENAI_MODEL_ID:ep-20250822222445-8zlp7}
        # Chat接口路径,与OpenAI接口保持一致
        completions-path: /v3/chat/completions
      image:
        options:
          # 模型ID,需要替换为实际的接入点ID
          model: ${OPENAI_MODEL_ID:ep-20251101111218-xvcnt}
        # Chat接口路径,与OpenAI接口保持一致
        completions-path: /v3/chat/completions

# 注意: 当前只支持 OpenAI 图像生成功能
# 如需文本生成功能，请配置相应的 AI 服务

# 管理端点
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: always

security:
  # 跳过验证码校验的客户端
  ignore-clients:
    - test
  oauth2:
    accessToken:
      ValiditySeconds: ${OAUTH2_VALIDITY_SECONDS:86400}
    ignore:
      urls:
        - /webjars/**
        - /v3/api-docs/**
        - /doc.html
        - /swagger-ui.html
        - /api/**
# 自定义配置
redink:
  cors:
    origins: http://localhost:5173,http://localhost:3000
  history:
    dir: history
    max-records: 1000
  image:
    max-concurrent: 15
    auto-retry: 3